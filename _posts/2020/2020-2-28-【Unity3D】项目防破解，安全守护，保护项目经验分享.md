---
layout: post
category: Unity3D-Daily
title: 【Unity3D】项目防破解，安全守护，保护项目经验分享
tagline: by 恬静的小魔龙
tag: Unity3D
---

##一、前言
游戏软件开发商面临的挑战和问题

➤ 发行的游戏被盗版，核心算法和游戏资源被盗用。

##二、原文
原文地址：http://bbs.gameres.com/forum.php?mod=viewthread&tid=802768&extra=page=&filter=sortid&sortid=6
原文作者：yihonghao 
原文出处：GameRes游资网

##三、正文
Unity 3D保护案例分享 
![这里写图片描述](https://img-blog.csdn.net/20180725160747826?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3E3NjQ0MjQ1Njc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)



Unity3D是由Unity Technologies开发的一个让玩家轻松创建诸如三维视频游戏、建筑可视化、实时三维动画等类型互动内容的多平台的综合型游戏开发工具，是一个全面整合的专业游戏引擎。通过unity 3D开发的游戏有很多为大家所熟知，手游比如王者荣耀、炉石传说、神庙逃亡；网页游戏例如新仙剑、QQ乐团等。

游戏软件开发商面临的挑战和问题

➤ 发行的游戏被盗版，核心算法和游戏资源被盗用。

【客户案例】Unity 3D保护方案

上海雄**电子有限公司

开发语言：C++ 、C#
游戏引擎：Unity 3D-2017, Unreal Engine 4
产品形态：软件+游戏机硬件
客户需求：对软件安全性要求极高，主要是对软件源码进行保护，防止游戏被破解、内存被修改，以及游戏资源被窃取。

加密方案

主程序保护：Unity 3D 使用 Virbox Protector对Assembly-CSharp.dll 进行加壳保护，Unreal Engine 4 的游戏对主程序 exe 加壳，并且关键函数使用了虚拟化和碎片代码执行。
环境保护：启用反黑引擎，实时保护软件运行环境，防止内存被修改，进行 Hook 检测等。
资源保护：使用 DSProtector 对游戏软件的多个资源文件进行加密，例如 Resources 目录下和其它 Unity 3D 或者是 *.PAK 资源文件等。

最终效果

使用 DnSpy 工具对保护过的文件进行反编译尝试，DnSpy 无法反编译出源代码和资源原文件。使用 IDA PRO 无法反汇编源代码，游戏运行不掉帧，经过保护的游戏软件，自 2016 年 3 月精锐 5 上线至今，没有发现破解案例。
注
碎片代码执行：基于 LLVM 和 ARM 虚拟机技术，自动抽取海量代码移入内核态模块，极大的降低了使用门槛，不再需要手动移植算法，效果上类似于将软件打散执行，让破解者无从下手。

如何保证安全强度？

➤ Virbox Protector

Virbox Protector 是深思数盾自主研发的高强度外壳加密工具，集碎片代码执行（自动化代码移植）、代码混淆、外壳加密、数据加密于一身，无需编程就能达到极高的安全强度。

针对游戏软件的特性，Virbox Protector 为 Unity 3D、Unreal Engine 4 进行了专门优化。

防护效果：
①有效防止 exe、dll 等文件被反编译或反汇编；
②利用代码混淆和虚拟化技术对软件关键函数进行保护，延缓黑客通过人肉还原代码逻辑的进度；
③碎片代码执行将关键代码剥离至安全内核中运行，使得黑客无法还原出代码逻辑。

➤ AHS（反黑引擎）
内置 R0 级核心态反黑引擎，是一种基于黑客行为特征的反制手段，可以精准的打击调试、注入、内存修改等行为，使得软件安全由被动防守转变为主动防护。

反黑引擎（AHS）特点和功能：
● 高级进程防护
● 基于黑名单特征库的进程模块查杀
● 内存防护
● 可疑进程模块上传，特征库持续更新

➤ 全盘加密（即将上线）
基于 True Crypt 技术，完整的加密整个磁盘扇区，密钥存放在精锐 5 的内部。没有精锐 5 无法启动系统，也无法使用外挂硬盘的方式读取数据，硬盘与精锐 5 的通讯已做安全处理，黑客无法监听拦截。

➤ 操作系统裁剪服务（即将上线）
删除没有必要的 Windows 模块，绕开 Windows 桌面直接进入游戏，并且去除多余的甚至危害系统安全的模块。整个系统裁剪后仅有 1G 甚至几百 M，完美兼容 4/8G的 SSD。